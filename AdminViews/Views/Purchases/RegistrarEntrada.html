<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Registrar Entrada</title>
    <link rel="import" href="/Views/Shared/Layout.html" id="import">
</head>
<body class="hold-transition skin-yellow fixed sidebar-mini">
    <div class="wrapper">
        <script>
            var getImport = document.querySelector('#import');
            var getContent = getImport.import.querySelector('.main-header');
            document.body.appendChild(getContent.cloneNode(true));

            var getImport = document.querySelector('#import');
            var getContent = getImport.import.querySelector('.sidebar-toggle');
            document.body.appendChild(getContent.cloneNode(true));

            var getImport = document.querySelector('#import');
            var getContent = getImport.import.querySelector('.main-sidebar');
            document.body.appendChild(getContent.cloneNode(true));

            var getImport = document.querySelector('#import');
            var getContent = getImport.import.querySelector('.main-footer');
            document.body.appendChild(getContent.cloneNode(true));

            var getImport = document.querySelector('#import');
            var getContent = getImport.import.querySelector('.control-sidebar');
            document.body.appendChild(getContent.cloneNode(true));

        </script>
        <div class="content-wrapper">
            <!--<form enctype="multipart/form-data">-->
            <section class="content-header">
                <h1>
                    DATOS ENTRADA
                </h1>
            </section>


            <section class="content">
                <form>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="box box-primary">
                                <div class="box-header">
                                    <h3 class="box-title">DATOS ORDENES COMPRA</h3>
                                </div>
                                <div class="box-body">
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label id="lblUsuario">Usuario</label>
                                                <input type="text" id="nvUsuario" name="nvUsuario" class="form-control UsuarioOrigen" style="display:block; background-color:lightgoldenrodyellow" readonly />
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label id="lblSedeOrigen">Almacen Origen</label>
                                                <input type="text" id="vcSedeOrigen" name="vcSedeOrigen" class="form-control SedeOrigen" style="display: block ;background-color:lightgoldenrodyellow" readonly />
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label id="lblSubAlmacenEntradaRegistro53" style="display: block">Divisionarias</label>
                                                <select class="form-control midivisionaria" style="display: block;" id="cboSubAlmacenRegistroEntrada53">
                                                    <!--<option value="0">FARMACO O MEDICAMENTO</option>
                                                    <option value="1">INSUMO</option>
                                                    <option value="2">EPPS</option>
                                                    <option value="3">EQUIPOS COMPUTO</option>
                                                    <option value="4">EQUIPOS MEDICO</option>
                                                    <option value="5">OTROS</option>
                                                    <option value="6">DEVOLUCIONES</option>-->
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label for="lblFechaEntrada53">Fecha</label>
                                                <input type="text" class="datepicker form-control mifecha" id="dFechaEntrada53" name="dFechaEntrada53" value="" placeholder="dd/mm/yyyy" />
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label id="lblEstadoEntrada53" style="display: block">Estado</label>
                                                <select class="form-control" style="display: block;" id="cboEstadoEntrada53">
                                                    <option value="0">---TODOS---</option>
                                                    <option value="1">BORRADOR</option>
                                                    <option value="2">CONFIRMADO</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <!--<div class="col-md-2">
                                        <div class="form-group">
                                            <label id="lblSedeEntrada53" style="display: block">Sede</label>
                                            <select class="form-control" style="display: block;" id="cboSedeEntrada53"></select>
                                        </div>
                                    </div>-->


                                    </div>
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label id="lblTipoDocumento53" style="display: block">Tipo Documento</label>
                                                <select class="form-control" style="display: block;" id="cboTipoDocumento53">
                                                    <option value="0">----TODOS-----</option>
                                                    <option value="1">GUIA REMISIÓN</option>
                                                    <option value="2">NOTA ENTRADA</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-md-1">
                                            <div class="form-group">
                                                <label id="lblSerieEntrada53">Serie</label>
                                                <input type="text" class="form-control" id="nvSerieEntrada53" name="nvSerieEntrada53" value="" style="display: block;" />
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <div class="form-group">
                                                <label id="lblNumeroEntrada53">Correlativo</label>
                                                <input type="text" class="form-control" id="nvNumeroEntrada53" name="nvNumeroEntrada53" value="" style="display: block;" />
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label id="lblMotivoEntrada53" style="display: block">Motivo</label>
                                                <select class="form-control" style="display: block;" id="cboMotivoEntrada53" name="cboMotivoEntrada53">
                                                    <option value="0">DEVOLUCION</option>
                                                    <option value="1">COMPRA</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-md-1">
                                            <div class="form-group">
                                                <div class="form-group" style="display:none" id="OC53">
                                                    <label id="lblOrdenEntrada53">Orden/Devolución</label>
                                                    <input type="text" class="form-control" id="nvOrdenEntrada53" name="nvOrdenEntrada53" value="" />
                                                </div>
                                        </div>
                                            </div>
                                        <div class="col-md-1">
                                            <div class="form-group" style="display:none" id="btnOC53">
                                                <button type="button" class="btn btn-success sincabecera" name="btnBuscarOrdenCompra53" id="btnBuscarOrdenCompra53">
                                                    <span class="glyphicon glyphicon-search">
                                                    </span>
                                                </button>
                                            </div>
                                        </div>

                                    </div>


                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label id="lblObservacionEntrada53">Observación</label>
                                                <textarea class="form-control" id="nvObservacionEntrada53"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <!--Datos Usuario-->
                                    <!--Fin Datos Usuario-->
                                </div>
                            </div>
                        </div>
                    </div>
                    </form>
            </section>

            <section class="content-header">
                <h1></h1>
            </section>
       



            <section class="content">
                <div class="box box-primary">
                    <div class="box-header">
                        <div class="table-responsive">
                            <table class="table table-bordered " id="TablaCabeceraEntrada53">
                                <tr>
                                    <td>
                                        <b>DETALLE ENTRADA</b>
                                    </td>
                                    <td align="right">
                                        <b>Cantidad de Items: <span id="CantidadItemsEntrada53">0</span></b>
                                    </td>
                                </tr>
                            </table>
                        </div>
        
                    <div class="box-body">
                        <div class="row">
                            <div class="col-md-1">
                                <div class="form-group">
                                    <label id="lblCodigoEntrada53">Codigo</label>
                                    <input type="text" class="form-control" id="vcCodigoEntrada53" name="vcCodigoEntrada53" value="" />
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="form-group">
                                    <label id="lblDescripcionEntrada53">Descripcion</label>
                                    <input type="text" class="form-control" id="vcDescripcionEntrada53" name="vcDescripcionEntrada53" value="" />
                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="form-group">
                                    <label id="lblSubAlmacenEntrada53" style="display: block">Divisionarias</label>
                                    <select class="form-control midivisionaria" id="cboSubAlmacenEntrada53">
                                        <!--<option value="0">FARMACO O MEDICAMENTO</option>
                                            <option value="1">INSUMO</option>
                                            <option value="2">EPPS</option>
                                            <option value="3">EQUIPOS COMPUTO</option>
                                            <option value="4">EQUIPOS MEDICO</option>
                                            <option value="5">OTROS</option>
                                            <option value="6">DEVOLUCIONES</option>-->
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <label id="lblPresentacionEntrada53">Presentacion</label>
                                    <select class="form-control" id="cboPresentacionEntrada53">
                                        <!--<option value="0">CAJA X 100</option>
                                        <option value="1">UNIDAD</option>
                                        <option value="2">BLISTER</option>-->
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-1">
                                <div class="form-group">
                                    <label for="lblCantidadEntrada53">Cantidad</label>
                                    <input type="number" class="form-control" id="intCantidadEntrada53" name="intCantidadEntrada53" value="" />
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <label id="lblSede16">Centro Costo</label>
                                    <input type="text" id="vcSede16" name="vcSede16" class="form-control" readonly />
                                </div>
                            </div>
                            <div class="col_md_1">
                                <div class="form-group">

                                    <button type="button" class="btn btn-success sincabecera" id="btnLoteEntrada53" name="btnLoteEntrada53">
                                        <span class=""></span><b>Lote</b>
                                    </button>

                                    <button class="btn btn-success sincabecera" id="btnAgregarDetalleEntrada53" name="btnAgregarDetalleEntrada53">
                                        <span class="glyphicon glyphicon-plus"></span><b></b>
                                    </button>
                                </div>
                            </div>


                          
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <input type="hidden" id="Entrada_item" name="Entrada_item" />
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover" id="tblDetalleEntrada53">
                                    <tr class="info">
                                        <th>Acciones</th>
                                        <th>Item</th>
                                        <th>Codigo</th>
                                        <th>Descripcion</th>
                                        <td hidden>Valor Divisionarias</td>
                                        <th>Divisionarias</th>
                                        <td hidden>Valor Presentacion</td>
                                        <th>Presentacion</th>
                                        <th>Cantidad</th>
                                        <th>CentroCosto</th>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                    </div>
            </section>

            <div class="panel-body">
                <div class="form-group">

                    <button type="button" class="btn btn-info" id="" name=""><span class="glyphicon glyphicon-floppy-disk"></span><b>Guardar</b></button>
                    <button type="button" class="btn btn-success" id="" name=""><span class="glyphicon glyphicon-ok"></span><b>Confirmar</b></button>
                    <!--<button type="button" class="btn btn-info" id=""><span class="glyphicon glyphicon-print"></span><b>Imprimir</b></button>-->
                    <button type="button" class="btn btn-warning" id="Atras"><span class="glyphicon glyphicon-arrow-left"></span><b>Atras</b></button>
                </div>
            </div>
            <!--</form>-->
        </div>
    </div>
</body>
</html>

<table id="tabla_oculta_entrada">
    <tr class="fila-base">
        <td width="65px">
            <button type="button" class="btn btn-danger btn-xs" id="QuitarEntrada"><span class="glyphicon glyphicon-remove"></span></button>
            <button type="button" class="btn btn-success btn-xs" id="ModificarEntrada"><span class="glyphicon glyphicon-pencil"></span></button>
        </td>
        <td></td><!--Item-->
        <td></td><!--Codigo-->
        <td></td><!--Descripcion-->
        <td hidden></td><!--Valor Divisionarias-->
        <td></td><!--Divisionarias-->
        <td hidden></td><!--Valor Presentacion-->
        <td></td><!--Presentacion-->
        <td></td><!--Cantidad-->
        <td></td><!--Centro Costo-->
    </tr>
</table>

<div class="modal fade bs-example-modal-lg" id="frmBuscarOrdenCompra" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title titulo-modal" style="text-align:center" id=" mymodallabel">BUSCAR ORDEN DE COMPRA</h4>
            </div>
            <div class="box-body">
                <div class="row">
                    <div class="col-md-2">
                        <div class="form-group">
                            <label for="Fecha">Fecha Orden</label>
                            <input type="text" class="datepicker form-control mifecha" name="dFechaInicioEntrada53" id="dFechaInicioEntrada53" placeholder="dd/mm/yyyy" value="" />
                            
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label for="Fecha">Fecha Entrega</label>
                            <input type="text" class="datepicker form-control mifecha" name="dFechaFinEntrada53" id="dFechaFinEntrada53" placeholder="dd/mm/yyyy" value="" />
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <label id="lblDecripción54">Proveedor</label>
                            <input type="text" class="form-control" id="nvProveedorEntrada53" name="nvProveedorEntrada53" value="" />
                            <input type="hidden" class="form-control" id="nvProveedorRuc53" name="nvProveedorRuc53" value="" />
                        </div>
                    </div>


                    <div class="col-md-2">
                        <div class="form-group">
                            <label id="lblDecripción54">Id</label>
                            <input type="text" class="form-control" id="idProveedor53" name="idProveedor53" value="" />
                        </div>
                    </div>


                    <div class="col-md-2">
                        <div class="form-group">
                            <button type="button" class="btn btn-success sincabecera" id="BuscarOrdenCompra">
                                <span class="glyphicon glyphicon-search">
                                </span>
                                <b>Buscar</b>
                            </button>
                        </div>
                    </div>
                </div>
                    <div class="table-responsive">
                        <table class="table table-bordered" id="ListaBusquedaOrdenesCompra">
                            <tr class="info">
                                <th></th>
                                <th>Id</th>
                                <th hidden></th><!--Establecimiente-->
                                <th>Centro Costo</th>
                                <th>Proveedor</th>
                                <th>Tipo</th>
                                <th>Fecha</th>
                            </tr>
                            <tr >
                                <td>
                                <button type="button" class="btn btn-success btn-xs" id="Buscar" name="Buscar">
                                    <span class="glyphicon glyphicon-search">
                                    </span>
                                    <b>Agregar</b>
                                </button>
                                </td>
                                <td>1</td>
                                <td hidden></td>
                                <td>San Isidro</td>
                                <td>Tailoy</td>
                                <td>Orden de Compra</td>
                                <td>21/02/2017</td>
                            </tr>
                        </table>
                    </div>
               
            </div>
        </div>
    </div>
</div>



<div class="modal fade xs" id="frmBuscarLote" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" vertical-align:middle">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title titulo-modal" style="text-align:center" id=" mymodallabel">VER LOTE</h4>
            </div>
            <div class="box-body">
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="lblFechaVencimientoEntrada53">Fecha Vencimiento</label>
                            <input type="text" class="datepicker form-control mifecha" name="dFechaVencimientoEntrada53" id="dFechaVencimientoEntrada53" placeholder="dd/mm/yyyy" value="" />

                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label for="lblLoteEntrada53">Lote</label>
                            <input type="text" class="form-control" name="vcLoteEntrada53" id="vcLoteEntrada53" value="" />
                        </div>
                    </div>



                    <div class="col-md-2">
                        <div class="form-group">
                            <label id="lblCantidadEntradaLote53">Cantidad</label>
                            <input type="number" class="form-control" id="" name="numCantidadEntradaLote53" value="" />
                        </div>
                    </div>


                    <div class="col-md-2">
                        <div class="form-group">
                            <button type="button" class="btn btn-success sincabecera" id="BuscarLoteEntrada53">
                                <span class="glyphicon glyphicon-search">
                                </span>
                                <b>Buscar</b>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table table-bordered" id="ListaBusquedaLote">
                        <tr class="info">


                            <th>Cantidad</th>
                            <th>Lote</th>
                            <th>Fecha Vencimiento</th>
                        </tr>
                        <tr>


                            <td>2</td>
                            <td>ABC123</td>
                            <td>21/02/2017</td>
                        </tr>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>


<script type="text/javascript">


    $("#btnLoteEntrada53").click(function () {
        $('#frmBuscarLote').modal('toggle');
    });

    $('#frmBuscarLote').on('hidden.bs.modal', function (e) {
        LimpiarDetalleFO();
    });

    $(document).ready(function () {
        $("#btnBuscarOrdenCompra53").click(function () {
            $('#frmBuscarOrdenCompra').modal('toggle');
         
        });

        Presentacion();
        SubAlmacen();

   
        $("#nvProveedorEntrada53").autocomplete({
            source: function (request, response) {
                filtro = $("#nvProveedorEntrada53").val();
                var data = { filtro: filtro };
                $.ajax({
                    type: "GET",
                    datatype: "json",
                    data: { filtro: filtro },
                    url: 'http://localhost:22822/ProveedorByFiltro/Get',
                    async: true,
                    contentType: "application/json",
                    success: function (data) {
                        response($.map(data, function (item) {
                            return { value: item.nvRazonSocial, text1: item.vcRUCProveedor};
                        }))
                    },
                    error: function () { console.log("ERROR..."); }
                })
            },
            minLength: 3,
            select: function (event, ui) {
                $("#nvProveedorEntrada53").val(ui.item.text);
                $("#nvProveedorRuc53").val(ui.item.text1);
                //$("#nvTrabajadorR35").prop('readonly', true);
                $("#nvProveedorEntrada53").css("background-color", "lightgoldenrodyellow");
            },
            error: function (ex) {
                alert('Error al traer datos.' + ex);
            }
        })


    });








  
    $(document).on("click", "#Cargar", function () {
        arc = $("#CargarArchivo").val();
        alert(arc);
    });

    $('#frmBuscarOrdenCompra').on('hidden.bs.modal', function (e) {
        LimpiarDetalleOrdenCompra();
    });


    $("#cboMotivoEntrada53").change(function () {
        if ($("#cboMotivoEntrada53").val() == "1") {
            $("#OC53").show();
            $("#btnOC53").show();
        } else {
            $("#OC53").hide();
            $("#btnOC53").hide();
        }
    });

    $(function () {
        $(".datepicker").datepicker();
    });
</script>
