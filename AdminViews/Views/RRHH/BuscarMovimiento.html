<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Buscar Movimiento</title>
    <link rel="import" href="/Views/Shared/Layout.html" id="import">
</head>
<body class="hold-transition skin-edit fixed sidebar-mini">
    <div class="wrapper">
        <script>
            var getImport = document.querySelector('#import');
            var getContent = getImport.import.querySelector('.main-header');
            document.body.appendChild(getContent.cloneNode(true));

            var getImport = document.querySelector('#import');
            var getContent = getImport.import.querySelector('.sidebar-toggle');
            document.body.appendChild(getContent.cloneNode(true));

            var getImport = document.querySelector('#import');
            var getContent = getImport.import.querySelector('.main-sidebar');
            document.body.appendChild(getContent.cloneNode(true));

            var getImport = document.querySelector('#import');
            var getContent = getImport.import.querySelector('.main-footer');
            document.body.appendChild(getContent.cloneNode(true));

            var getImport = document.querySelector('#import');
            var getContent = getImport.import.querySelector('.control-sidebar');
            document.body.appendChild(getContent.cloneNode(true));

        </script>
        <div class="content-wrapper">
            <section class="content-header">
                <h1>
                    BUSCAR MOVIMIENTO
                </h1>
            </section>
            <section class="content">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-primary">
                            <div class="box-header">
                                <h3 class="box-title">DATOS MOVIMIENTO</h3>
                            </div>
                            <div class="box-body">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label id="lblTrabajador23">Trabajador</label>
                                            <input type="text" class="form-control" name="nvTrabajador23" id="nvTrabajador23" value=" " />
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label id="lblSedeOrigen23">Sede Origen</label>
                                            <select class="form-control ListaSede" id="cboSedeOrigen23"></select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label id="lblSedeDestino23">Sede Destino</label>
                                            <select class="form-control ListaSede" id="cboSedeDestino23"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <label id="lblFecha23">Fecha</label>
                                            <input type="text" class="datepicker form-control mifecha" placeholder="dd/mm/yyyy" id="dInicioMovimiento23" name="dInicioMovimiento23" value="" />
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="form-group">
                                            <input type="text" class="datepicker form-control sincabecera mifecha" placeholder="dd/mm/yyyy" id="dFinMovimiento23" name="dFinMovimiento23" value="" />
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <button type="button" class="btn btn-success sincabecera" id="btnBuscarMovimiento23" name="btnBuscarMovimiento23">
                                                <span class="glyphicon glyphicon-search">
                                                </span>
                                                <!--<b>Buscar</b>-->
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="content">
                <div class="box box-primary">
                    <div class="box-header">
                        <table id="CabeceraBuscaMovimiento">
                            <tr>
                                <td width="100%">
                                    <b>LISTA DE MOVIMIENTO</b>
                                </td>
                                <td width="100%" align="right">
                                    <button type="button" class="btn btn-success" id="btnNuevoMovimiento23" name="btnNuevoMovimiento23">
                                        <b>Nuevo</b>
                                        <span class="glyphicon glyphicon-file">
                                        </span>
                                    </button>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="box-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="table-responsive">
                                    <table class="table table-bordered table-hover" id="TablaBuscarMovimiento">
                                        <tr class="info">
                                            <th width="100px">Acciones</th>
                                            <th>Trabajador</th>
                                            <th>Sede Origen</th>
                                            <th>Sede Destino</th>
                                            <th>Fecha</th>
                                        </tr>
                                        <tr>
                                            <td>
                                                <button type="button" class="btn btn-info" id="Buscar" name="BuscarTareo">
                                                    <span class="glyphicon glyphicon-info-sign">
                                                    </span>
                                                    <!--<b>Detalle</b>-->
                                                </button>
                                            </td>
                                            <td>Jorge Leiva</td>
                                            <td>Buenaventura</td>
                                            <td>Oyón</td>
                                            <td>21/02/2017</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <button type="button" class="btn btn-info" id="Buscar" name="BuscarTareo">
                                                    <span class="glyphicon glyphicon-info-sign">
                                                    </span>
                                                    <!--<b>Detalle</b>-->
                                                </button>
                                            </td>
                                            <td>Juan Livano</td>
                                            <td>Uchucchacua</td>
                                            <td>Oyón</td>
                                            <td>11/01/2017</td>

                                        </tr>
                                        <tr>
                                            <td>
                                                <button type="button" class="btn btn-info" id="Buscar" name="BuscarTareo">
                                                    <span class="glyphicon glyphicon-info-sign">
                                                    </span>
                                                    <!--<b>Detalle</b>-->
                                                </button>
                                            </td>
                                            <td>Jose Livia</td>
                                            <td>Oyón</td>
                                            <td>Clínica comas</td>
                                            <td>4/12/2016</td>

                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
</body>
</html>

<script type="text/javascript">
$(document).ready(function () {
    //    $('#TablaBuscarMovimiento').DataTable({
    //        "scrollX": true
    //    });
    
    $("#nvTrabajador23").autocomplete({
        source: function (request, response) {
            filtro = $("#nvTrabajador23").val();
            var data = { filtro: filtro };
            $.ajax({
                type: "GET",
                datatype: "json",
                data: { filtro: filtro },
                url: 'http://admin_erp.natclar.com.pe:12000//Natclar/TrabajadorByFiltro/Get',
                async: true,
                //data: JSON.stringify({usuario: dataobj}),
                //data: JSON.stringify(dataobj),
                //data: jQuery.parseJSON({user:us, pass:passw}),
                //datos: { filtro: filtro },
                contentType: "application/json",
                success: function (data) {
                    console.log(data)
                    response($.map(data, function (item) {
                        return { value: item.persona.vcApellidoPaterno + " " + item.persona.vcApellidoMaterno + " " + item.persona.vcNombres, text1: item.persona.vcNumeroDocumento, text2: item.puesto.Descripcion, text3: item.AreaNatclar.Descripcion, text4: item.sede.UnidadOrganizativa.vcDescripcion, text5: item.UbicacionTrabajo.Unidad.EmpresaTitular.nvRazonSocial, text6: item.sede.Ubigeo.nvDescripcion, text7: item.sistemaTrabajo.vcDescripcion };
                    }))
                },
                error: function () { console.log("ERROR..."); }
            })
        },
        minLength: 3,
        select: function (event, ui) {
            $("#nvTrabajador23").val(ui.item.text);
           
            //$("#nvTrabajador23").prop('readonly', true);
            //$("#nvTrabajador23").css("background-color", "lightgoldenrodyellow");
        },
        error: function (ex) {
            alert('Error al traer datos.' + ex);
        }
    })

});

$(function () {
    $(".datepicker").datepicker();
});

</script>


